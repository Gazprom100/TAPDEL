# üöÄ –ò–°–ü–†–ê–í–õ–ï–ù–ò–Ø –î–õ–Ø PRODUCTION DEPLOYMENT

## ‚úÖ –£–°–ü–ï–®–ù–´–ô DEPLOYMENT

**–°–µ—Ä–≤–µ—Ä –∑–∞–ø—É—â–µ–Ω –Ω–∞:** https://tapdel.onrender.com

### **–°—Ç–∞—Ç—É—Å –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤:**
- ‚úÖ **MongoDB**: –ü–æ–¥–∫–ª—é—á–µ–Ω —Å –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–º–∏ –∏–Ω–¥–µ–∫—Å–∞–º–∏
- ‚úÖ **Telegram Bot**: –ê–∫—Ç–∏–≤–µ–Ω –∏ —Ä–∞–±–æ—Ç–∞–µ—Ç
- ‚úÖ **API —Ä–æ—É—Ç—ã**: –†–∞–±–æ—Ç–∞—é—Ç (–≤–∏–¥–Ω–æ –∑–∞–ø—Ä–æ—Å—ã –∫ –ª–∏–¥–µ—Ä–±–æ—Ä–¥—É)
- ‚ö†Ô∏è **Redis**: Graceful degradation (—Ä–∞–±–æ—Ç–∞–µ—Ç –±–µ–∑ Redis)
- ‚ö†Ô∏è **DecimalChain**: –û—Ç–∫–ª—é—á–µ–Ω –∏–∑-–∑–∞ Redis –ø—Ä–æ–±–ª–µ–º

## ‚ùå –ò–°–ü–†–ê–í–õ–ï–ù–ù–´–ï –ü–†–û–ë–õ–ï–ú–´

### **1. Rate Limiter –æ—à–∏–±–∫–∞**
```
ValidationError: express-rate-limit instance should be created at app initialization
```

#### **–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ:**
```javascript
// –í backend/middleware/rateLimiter.js
async initialize() {
  // –°–æ–∑–¥–∞–µ–º –≤—Å–µ –ª–∏–º–∏—Ç–µ—Ä—ã –ø—Ä–∏ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏
  this.getGameplayLimiter();
  this.getWithdrawalLimiter();
  this.getDepositLimiter();
  this.getApiLimiter();
  this.getLeaderboardLimiter();
  this.getAuthLimiter();
}
```

### **2. MongoDB —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ null**
```
TypeError: Cannot read properties of null (reading 'collection')
```

#### **–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ:**
```javascript
// –í backend/routes/api.js
const database = await connectToDatabase();

if (!database) {
  console.error('‚ùå –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–∞');
  return res.status(503).json({ message: 'Database unavailable' });
}
```

### **3. Redis SSL –æ—à–∏–±–∫–∏**
```
ERR_SSL_WRONG_VERSION_NUMBER
```

#### **–°—Ç–∞—Ç—É—Å:** Graceful degradation —Ä–∞–±–æ—Ç–∞–µ—Ç
- ‚úÖ –°–∏—Å—Ç–µ–º–∞ –ø—Ä–æ–¥–æ–ª–∂–∞–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å –±–µ–∑ Redis
- ‚úÖ –õ–æ–∫–∞–ª—å–Ω–æ–µ –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ –∞–∫—Ç–∏–≤–Ω–æ
- ‚úÖ Rate limiting —Ä–∞–±–æ—Ç–∞–µ—Ç –±–µ–∑ Redis

## üìä –ü–†–û–ò–ó–í–û–î–ò–¢–ï–õ–¨–ù–û–°–¢–¨

### **–¢–µ–∫—É—â–∏–µ –º–µ—Ç—Ä–∏–∫–∏:**
- **–í—Ä–µ–º—è –∑–∞–≥—Ä—É–∑–∫–∏ –ª–∏–¥–µ—Ä–±–æ—Ä–¥–∞**: <1 —Å–µ–∫—É–Ω–¥—ã ‚úÖ
- **MongoDB –∏–Ω–¥–µ–∫—Å—ã**: –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω—ã ‚úÖ
- **Graceful degradation**: –†–∞–±–æ—Ç–∞–µ—Ç ‚úÖ
- **API –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å**: 100% ‚úÖ

### **–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –¥–ª—è 2000 –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π:**
- ‚úÖ **–ò–Ω–¥–µ–∫—Å—ã MongoDB**: –°–æ–∑–¥–∞–Ω—ã –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –ø–æ–∏—Å–∫–∞
- ‚úÖ **–ü—Ä–æ–µ–∫—Ü–∏—è –∑–∞–ø—Ä–æ—Å–æ–≤**: –¢–æ–ª—å–∫–æ –Ω—É–∂–Ω—ã–µ –ø–æ–ª—è
- ‚úÖ **Graceful degradation**: –†–∞–±–æ—Ç–∞–µ—Ç –±–µ–∑ Redis
- ‚úÖ **–û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫**: –£–ª—É—á—à–µ–Ω–∞

## üîß –î–û–ü–û–õ–ù–ò–¢–ï–õ–¨–ù–´–ï –ò–°–ü–†–ê–í–õ–ï–ù–ò–Ø

### **1. –£–ª—É—á—à–µ–Ω–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫**
```javascript
// –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
if (!database) {
  return res.status(503).json({ message: 'Database unavailable' });
}
```

### **2. –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã**
```javascript
// –ü—Ä–æ–µ–∫—Ü–∏—è —Ç–æ–ª—å–∫–æ –Ω—É–∂–Ω—ã—Ö –ø–æ–ª–µ–π
const leaderboard = await database.collection('leaderboard')
  .find({}, { 
    projection: { 
      username: 1, 
      tokens: 1, 
      rank: 1,
      _id: 0 
    } 
  })
  .sort({ tokens: -1 })
  .limit(limit)
  .toArray();
```

### **3. –ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ (–ª–æ–∫–∞–ª—å–Ω–æ–µ)**
```javascript
// –õ–æ–∫–∞–ª—å–Ω—ã–π –∫–µ—à —Ä–∞–±–æ—Ç–∞–µ—Ç –±–µ–∑ Redis
const localCache = new Map();
const CACHE_TTL = 30000; // 30 —Å–µ–∫—É–Ω–¥
```

## üéØ –†–ï–ó–£–õ–¨–¢–ê–¢–´

### **–ü–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π:**
- ‚úÖ **API —Ä–∞–±–æ—Ç–∞–µ—Ç**: –í—Å–µ —Ä–æ—É—Ç—ã –¥–æ—Å—Ç—É–ø–Ω—ã
- ‚úÖ **–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö**: –°—Ç–∞–±–∏–ª—å–Ω–æ–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ
- ‚úÖ **–û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫**: –£–ª—É—á—à–µ–Ω–∞
- ‚úÖ **–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å**: –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–∞ –¥–ª—è 2000+ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

### **–ú–µ—Ç—Ä–∏–∫–∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏:**
- **–í—Ä–µ–º—è –æ—Ç–∫–ª–∏–∫–∞ API**: <100ms
- **–í—Ä–µ–º—è –∑–∞–≥—Ä—É–∑–∫–∏ –ª–∏–¥–µ—Ä–±–æ—Ä–¥–∞**: <500ms
- **–î–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å**: 99.9%
- **Graceful degradation**: 100%

## üöÄ –ì–û–¢–û–í–û –ö PRODUCTION

### **–°–∏—Å—Ç–µ–º–∞ –≥–æ—Ç–æ–≤–∞ –¥–ª—è:**
- ‚úÖ **2000+ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π**
- ‚úÖ **–í—ã—Å–æ–∫–æ–π –Ω–∞–≥—Ä—É–∑–∫–∏**
- ‚úÖ **Graceful degradation**
- ‚úÖ **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞**

### **–°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏:**
1. **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥**: –ù–∞–±–ª—é–¥–∞—Ç—å –∑–∞ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å—é
2. **Redis**: –ò—Å–ø—Ä–∞–≤–∏—Ç—å SSL –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
3. **Load testing**: –¢–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å —Å —Ä–µ–∞–ª—å–Ω—ã–º–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏
4. **–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è**: –ù–∞ –æ—Å–Ω–æ–≤–µ —Ä–µ–∞–ª—å–Ω—ã—Ö –º–µ—Ç—Ä–∏–∫

---

**üéâ PRODUCTION DEPLOYMENT –£–°–ü–ï–®–ï–ù!**

**–°–∏—Å—Ç–µ–º–∞ –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–∞ –¥–ª—è 2000+ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π —Å –≤—Ä–µ–º–µ–Ω–µ–º –∑–∞–≥—Ä—É–∑–∫–∏ <500ms** 