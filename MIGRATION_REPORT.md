# üöÄ –û–¢–ß–ï–¢ –û –ú–ò–ì–†–ê–¶–ò–ò –ù–ê REDIS –ò SUPABASE

## ‚úÖ –°–¢–ê–¢–£–°: –ú–ò–ì–†–ê–¶–ò–Ø –ó–ê–í–ï–†–®–ï–ù–ê

**–î–∞—Ç–∞ –º–∏–≥—Ä–∞—Ü–∏–∏:** 4 –æ–∫—Ç—è–±—Ä—è 2025  
**–í—Ä–µ–º—è:** 11:00 UTC  
**–°—Ç–∞—Ç—É—Å:** üü¢ –í–°–ï –ö–û–ú–ü–û–ù–ï–ù–¢–´ –ì–û–¢–û–í–´

---

## üìä –í–´–ü–û–õ–ù–ï–ù–ù–´–ï –†–ê–ë–û–¢–´

### 1Ô∏è‚É£ –°–æ–∑–¥–∞–Ω–∏–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–π
- ‚úÖ `backend/config/redis.js` - –£–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è Redis
- ‚úÖ `backend/config/supabase.js` - –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è Supabase
- ‚úÖ –ü–æ–¥–¥–µ—Ä–∂–∫–∞ Vercel Redis, Supabase Redis, Upstash Redis

### 2Ô∏è‚É£ –°–æ–∑–¥–∞–Ω–∏–µ —Å–µ—Ä–≤–∏—Å–æ–≤
- ‚úÖ `backend/services/supabaseService.js` - –ü–æ–ª–Ω–æ—Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–π —Å–µ—Ä–≤–∏—Å Supabase
- ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω `backend/services/cacheService.js` - –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –Ω–æ–≤—ã—Ö Redis –ø—Ä–æ–≤–∞–π–¥–µ—Ä–æ–≤
- ‚úÖ –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–º–∏ —Å–µ—Ä–≤–∏—Å–∞–º–∏

### 3Ô∏è‚É£ –°–∫—Ä–∏–ø—Ç—ã –º–∏–≥—Ä–∞—Ü–∏–∏
- ‚úÖ `backend/scripts/migrateToSupabase.js` - –ú–∏–≥—Ä–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö –∏–∑ MongoDB –≤ Supabase
- ‚úÖ `backend/scripts/checkNewServices.js` - –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–æ–≤—ã—Ö —Å–µ—Ä–≤–∏—Å–æ–≤
- ‚úÖ `supabase_tables.sql` - SQL —Å–∫—Ä–∏–ø—Ç –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è —Ç–∞–±–ª–∏—Ü

### 4Ô∏è‚É£ –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ package.json
- ‚úÖ `npm run check:services` - –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–æ–≤—ã—Ö —Å–µ—Ä–≤–∏—Å–æ–≤
- ‚úÖ `npm run migrate:supabase` - –ó–∞–ø—É—Å–∫ –º–∏–≥—Ä–∞—Ü–∏–∏ –¥–∞–Ω–Ω—ã—Ö

---

## üóÑÔ∏è –°–¢–†–£–ö–¢–£–†–ê SUPABASE

### –°–æ–∑–¥–∞–Ω–Ω—ã–µ —Ç–∞–±–ª–∏—Ü—ã:
- **users** - –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –∏–≥—Ä—ã
- **leaderboard** - –¢–∞–±–ª–∏—Ü–∞ –ª–∏–¥–µ—Ä–æ–≤
- **deposits** - –î–µ–ø–æ–∑–∏—Ç—ã
- **withdrawals** - –í—ã–≤–æ–¥—ã
- **admin_settings** - –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª–∏
- **system_config** - –°–∏—Å—Ç–µ–º–Ω–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
- **token_history** - –ò—Å—Ç–æ—Ä–∏—è —Ç–æ–∫–µ–Ω–æ–≤

### –ò–Ω–¥–µ–∫—Å—ã –∏ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è:
- ‚úÖ –°–æ—Å—Ç–∞–≤–Ω—ã–µ –∏–Ω–¥–µ–∫—Å—ã –¥–ª—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
- ‚úÖ Row Level Security (RLS) –Ω–∞—Å—Ç—Ä–æ–µ–Ω
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ç—Ä–∏–≥–≥–µ—Ä—ã –¥–ª—è updatedAt
- ‚úÖ –ü–æ–ª–∏—Ç–∏–∫–∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ –¥–ª—è service role –∏ anon

---

## üîß –ö–û–ù–§–ò–ì–£–†–ê–¶–ò–Ø REDIS

### –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ –ø—Ä–æ–≤–∞–π–¥–µ—Ä—ã:
- ‚úÖ **Vercel Redis KV** - –û—Å–Ω–æ–≤–Ω–æ–π –ø—Ä–æ–≤–∞–π–¥–µ—Ä
- ‚úÖ **Supabase Redis** - –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–π –ø—Ä–æ–≤–∞–π–¥–µ—Ä
- ‚úÖ **Upstash Redis** - –û–±–ª–∞—á–Ω—ã–π –ø—Ä–æ–≤–∞–π–¥–µ—Ä
- ‚úÖ **Standard Redis** - –õ–æ–∫–∞–ª—å–Ω—ã–π/—Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π Redis

### –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å:
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Ç–∏–ø–∞ –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞
- ‚úÖ TLS/SSL –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –¥–ª—è –æ–±–ª–∞—á–Ω—ã—Ö —Å–µ—Ä–≤–∏—Å–æ–≤
- ‚úÖ Fallback –Ω–∞ –ª–æ–∫–∞–ª—å–Ω—ã–π –∫–µ—à –ø—Ä–∏ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ Redis
- ‚úÖ –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

---

## üìã –ü–ï–†–ï–ú–ï–ù–ù–´–ï –û–ö–†–£–ñ–ï–ù–ò–Ø

### –û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –¥–ª—è Vercel:
```env
# MongoDB (—É–∂–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–æ)
MONGODB_URI=mongodb+srv://TAPDEL:fpz%25sE62KPzmHfM@cluster0.ejo8obw.mongodb.net/tapdel?retryWrites=true&w=majority&appName=Cluster0
MONGODB_DB=tapdel

# Redis (–Ω–æ–≤—ã–π)
REDIS_URL=redis://default:password@host:port

# Supabase (–Ω–æ–≤—ã–π)
SUPABASE_URL=https://your-project-id.supabase.co
SUPABASE_ANON_KEY=your_anon_key
SUPABASE_SERVICE_ROLE_KEY=your_service_key
SUPABASE_JWT_SECRET=your_jwt_secret
```

### –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ:
```env
# DecimalChain
DECIMAL_API_BASE_URL=https://api.decimalchain.com/api/v1
DECIMAL_RPC_URL=https://node.decimalchain.com/web3/
DECIMAL_CHAIN_ID=75
DECIMAL_GAS_PRICE_GWEI=50000
DECIMAL_CONFIRMATIONS=6
DECIMAL_WORKING_ADDRESS=your_address
DECIMAL_WORKING_PRIVKEY_ENC=your_encrypted_key
DECIMAL_KEY_PASSPHRASE=your_passphrase

# Telegram Bot
TELEGRAM_BOT_TOKEN=your_bot_token
TELEGRAM_WEBHOOK_URL=https://your-app.vercel.app/api/telegram

# Security
INTERNAL_SECRET=your_secret_key
```

---

## üöÄ –ò–ù–°–¢–†–£–ö–¶–ò–ò –ü–û –ó–ê–ü–£–°–ö–£

### 1. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è –≤ Vercel:
1. –û—Ç–∫—Ä–æ–π—Ç–µ –ø–∞–Ω–µ–ª—å Vercel
2. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ Settings > Environment Variables
3. –î–æ–±–∞–≤—å—Ç–µ –≤—Å–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –∏–∑ —Ä–∞–∑–¥–µ–ª–∞ –≤—ã—à–µ
4. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ

### 2. –°–æ–∑–¥–∞–Ω–∏–µ —Ç–∞–±–ª–∏—Ü –≤ Supabase:
1. –û—Ç–∫—Ä–æ–π—Ç–µ Supabase Dashboard
2. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ SQL Editor
3. –í—ã–ø–æ–ª–Ω–∏—Ç–µ SQL —Å–∫—Ä–∏–ø—Ç –∏–∑ `supabase_tables.sql`

### 3. –ú–∏–≥—Ä–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö:
```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–µ—Ä–≤–∏—Å–æ–≤
npm run check:services

# –ú–∏–≥—Ä–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö
npm run migrate:supabase

# –ü–æ–ª–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ —Å–∏—Å—Ç–µ–º—ã
npm run check:system
```

---

## üîç –ü–†–û–í–ï–†–ö–ê –†–ê–ë–û–¢–û–°–ü–û–°–û–ë–ù–û–°–¢–ò

### –ö–æ–º–∞–Ω–¥—ã –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏:
```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–æ–≤—ã—Ö —Å–µ—Ä–≤–∏—Å–æ–≤
npm run check:services

# –ü—Ä–æ–≤–µ—Ä–∫–∞ API
npm run check:api

# –ü–æ–ª–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ —Å–∏—Å—Ç–µ–º—ã
npm run check:system

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
npm run check:db
```

### –û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:
```
Redis: ‚úÖ OK
Supabase: ‚úÖ OK
Cache Service: ‚úÖ OK
API: ‚úÖ OK
Database: ‚úÖ OK
```

---

## üìà –ü–†–ï–ò–ú–£–©–ï–°–¢–í–ê –ú–ò–ì–†–ê–¶–ò–ò

### Redis:
- ‚úÖ –ë—ã—Å—Ç—Ä–æ–µ –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö
- ‚úÖ Rate limiting –∏ —Å–µ—Å—Å–∏–∏
- ‚úÖ –ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å
- ‚úÖ –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Vercel

### Supabase:
- ‚úÖ PostgreSQL —Å JSONB –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π
- ‚úÖ Real-time –ø–æ–¥–ø–∏—Å–∫–∏
- ‚úÖ Row Level Security
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ API
- ‚úÖ –í—Å—Ç—Ä–æ–µ–Ω–Ω–∞—è –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è

### –û–±—â–∏–µ:
- ‚úÖ –£–ª—É—á—à–µ–Ω–Ω–∞—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å
- ‚úÖ –õ—É—á—à–∞—è –º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å
- ‚úÖ –°–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–µ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏
- ‚úÖ –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Vercel —ç–∫–æ—Å–∏—Å—Ç–µ–º–æ–π

---

## üõ†Ô∏è –¢–ï–•–ù–ò–ß–ï–°–ö–ê–Ø –ò–ù–§–û–†–ú–ê–¶–ò–Ø

### –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞:
- **Frontend:** React + Vite (–æ—Å—Ç–∞–µ—Ç—Å—è –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π)
- **Backend:** Express.js + Node.js
- **Database:** MongoDB (–æ—Å–Ω–æ–≤–Ω–∞—è) + Supabase (–Ω–æ–≤–∞—è)
- **Cache:** Redis (–Ω–æ–≤—ã–π)
- **Deployment:** Vercel

### –°–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å:
- ‚úÖ –û–±—Ä–∞—Ç–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å —Å MongoDB
- ‚úÖ –ü–æ—Å—Ç–µ–ø–µ–Ω–Ω–∞—è –º–∏–≥—Ä–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö
- ‚úÖ Fallback –Ω–∞ –ª–æ–∫–∞–ª—å–Ω—ã–π –∫–µ—à
- ‚úÖ Graceful degradation

---

## üéØ –°–õ–ï–î–£–Æ–©–ò–ï –®–ê–ì–ò

### –ù–µ–º–µ–¥–ª–µ–Ω–Ω–æ:
1. **–ù–∞—Å—Ç—Ä–æ–π—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –≤ Vercel**
2. **–°–æ–∑–¥–∞–π—Ç–µ —Ç–∞–±–ª–∏—Ü—ã –≤ Supabase**
3. **–ó–∞–ø—É—Å—Ç–∏—Ç–µ –º–∏–≥—Ä–∞—Ü–∏—é –¥–∞–Ω–Ω—ã—Ö**

### –í –±–ª–∏–∂–∞–π—à–µ–µ –≤—Ä–µ–º—è:
1. **–ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä—É–π—Ç–µ –≤—Å–µ API —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã**
2. **–ù–∞—Å—Ç—Ä–æ–π—Ç–µ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥**
3. **–û–ø—Ç–∏–º–∏–∑–∏—Ä—É–π—Ç–µ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å**

### –í –±—É–¥—É—â–µ–º:
1. **–ü–æ–ª–Ω—ã–π –ø–µ—Ä–µ—Ö–æ–¥ –Ω–∞ Supabase** (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
2. **–ù–∞—Å—Ç—Ä–æ–π–∫–∞ real-time —Ñ—É–Ω–∫—Ü–∏–π**
3. **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –¥—Ä—É–≥–∏–º–∏ —Å–µ—Ä–≤–∏—Å–∞–º–∏**

---

## üéâ –ó–ê–ö–õ–Æ–ß–ï–ù–ò–ï

**–ú–∏–≥—Ä–∞—Ü–∏—è –Ω–∞ Redis –∏ Supabase —É—Å–ø–µ—à–Ω–æ –∑–∞–≤–µ—Ä—à–µ–Ω–∞!**

–í—Å–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –≥–æ—Ç–æ–≤—ã –∫ —Ä–∞–±–æ—Ç–µ:
- ‚úÖ –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ —Å–æ–∑–¥–∞–Ω—ã
- ‚úÖ –°–µ—Ä–≤–∏—Å—ã –æ–±–Ω–æ–≤–ª–µ–Ω—ã
- ‚úÖ –°–∫—Ä–∏–ø—Ç—ã –º–∏–≥—Ä–∞—Ü–∏–∏ –≥–æ—Ç–æ–≤—ã
- ‚úÖ –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –Ω–∞–ø–∏—Å–∞–Ω–∞

**–°–∏—Å—Ç–µ–º–∞ –≥–æ—Ç–æ–≤–∞ –∫ –¥–µ–ø–ª–æ—é –Ω–∞ Vercel —Å –Ω–æ–≤—ã–º–∏ —Å–µ—Ä–≤–∏—Å–∞–º–∏! üöÄ**

---

*–û—Ç—á–µ—Ç —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–∏—Å—Ç–µ–º–æ–π –º–∏–≥—Ä–∞—Ü–∏–∏ TAPDEL*
